import { useState } from "react";
import ProductCard from "../../components/ProductCard";
import SearchBar from "../../components/SearchBar";
import "./Shop.css";

// MOCK DATA - 5 danh m·ª•c, m·ªói danh m·ª•c 6 s·∫£n ph·∫©m = 30 s·∫£n ph·∫©m
const CATEGORIES = [
  { id: 1, name: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", icon: "üíä" },
  { id: 2, name: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", icon: "üåø" },
  { id: 3, name: "Thu·ªëc kh√°ng sinh", icon: "üíâ" },
  { id: 4, name: "ChƒÉm s√≥c c√° nh√¢n", icon: "üß¥" },
  { id: 5, name: "D·ª•ng c·ª• y t·∫ø", icon: "ü©∫" },
];

const MOCK_PRODUCTS = [
  // Danh m·ª•c 1: Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët (6 s·∫£n ph·∫©m)
  { 
    id: 1, 
    name: "Paracetamol 500mg", 
    price: 15000, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 100, 
    image: "/images/products/paracetamol.jpg",
    description: "Gi·∫£m ƒëau, h·∫° s·ªët hi·ªáu qu·∫£"
  },
  { 
    id: 2, 
    name: "Ibuprofen 400mg", 
    price: 25000, 
    originalPrice: 30000, 
    discount: 17, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 50, 
    image: "/images/products/ibuprofen.jpg",
    description: "Ch·ªëng vi√™m, gi·∫£m ƒëau"
  },
  { 
    id: 3, 
    name: "Aspirin 100mg", 
    price: 12000, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 80, 
    image: "/images/products/aspirin.jpg",
    description: "Gi·∫£m ƒëau, ch·ªëng ƒë√¥ng m√°u"
  },
  { 
    id: 4, 
    name: "Diclofenac 50mg", 
    price: 35000, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 5, 
    image: "/images/products/diclofenac.jpg",
    description: "Gi·∫£m ƒëau kh·ªõp, c∆°"
  },
  { 
    id: 5, 
    name: "Mefenamic Acid 500mg", 
    price: 28000, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 60, 
    image: "/images/products/mefenamic.jpg",
    description: "Gi·∫£m ƒëau b·ª•ng kinh"
  },
  { 
    id: 6, 
    name: "Naproxen 250mg", 
    price: 32000, 
    originalPrice: 40000, 
    discount: 20, 
    category: "Thu·ªëc gi·∫£m ƒëau - H·∫° s·ªët", 
    categoryId: 1, 
    stock: 45, 
    image: "/images/products/naproxen.jpg",
    description: "Gi·∫£m vi√™m kh·ªõp"
  },

  // Danh m·ª•c 2: Vitamin & TPCN (6 s·∫£n ph·∫©m)
  { 
    id: 7, 
    name: "Vitamin C 1000mg", 
    price: 45000, 
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 200, 
    image: "/images/products/vitamin-c.jpg",
    description: "TƒÉng s·ª©c ƒë·ªÅ kh√°ng"
  },
  { 
    id: 8, 
    name: "Vitamin D3 5000IU", 
    price: 85000, 
    originalPrice: 100000, 
    discount: 15, 
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 150, 
    image: "/images/products/vitamin-d3.jpg",
    description: "Ch·ªëng lo√£ng x∆∞∆°ng"
  },
  { 
    id: 9, 
    name: "Omega 3 Fish Oil", 
    price: 120000, 
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 100, 
    image: "/images/products/omega3.jpg",
    description: "T·ªët cho tim m·∫°ch"
  },
  { 
    id: 10, 
    name: "Multi Vitamin A-Z", 
    price: 95000, 
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 75, 
    image: "/images/products/multivitamin.jpg",
    description: "B·ªï sung ƒëa vitamin"
  },
  { 
    id: 11, 
    name: "Calcium + Vitamin D", 
    price: 65000,
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 90, 
    image: "/images/products/calcium.jpg",
    description: "Ch·∫Øc kh·ªèe x∆∞∆°ng"
  },
  { 
    id: 12, 
    name: "Collagen Plus", 
    price: 150000,
    originalPrice: 180000, 
    discount: 17, 
    category: "Vitamin & Th·ª±c ph·∫©m ch·ª©c nƒÉng", 
    categoryId: 2, 
    stock: 55, 
    image: "/images/products/collagen.jpg",
    description: "L√†m ƒë·∫πp da"
  },

  // Danh m·ª•c 3: Thu·ªëc kh√°ng sinh (6 s·∫£n ph·∫©m)
  { 
    id: 13, 
    name: "Amoxicillin 500mg",
    price: 45000, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 40, 
    image: "/images/products/amoxicillin.jpg",
    description: "Kh√°ng sinh ph·ªï r·ªông"
  },
  { 
    id: 14, 
    name: "Cephalexin 500mg", 
    price: 55000, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 35, 
    image: "/images/products/cephalexin.jpg",
    description: "Kh√°ng sinh Cephalosporin"
  },
  { 
    id: 15, 
    name: "Azithromycin 250mg", 
    price: 85000, 
    originalPrice: 95000, 
    discount: 11, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 30, 
    image: "/images/products/azithromycin.jpg",
    description: "Kh√°ng sinh Macrolide"
  },
  { 
    id: 16, 
    name: "Ciprofloxacin 500mg", 
    price: 65000, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 8, 
    image: "/images/products/ciprofloxacin.jpg",
    description: "Kh√°ng sinh Quinolone"
  },
  { 
    id: 17, 
    name: "Doxycycline 100mg", 
    price: 42000, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 25, 
    image: "/images/products/doxycycline.jpg",
    description: "Kh√°ng sinh Tetracycline"
  },
  { 
    id: 18, 
    name: "Metronidazole 500mg", 
    price: 38000, 
    category: "Thu·ªëc kh√°ng sinh", 
    categoryId: 3, 
    stock: 50, 
    image: "/images/products/metronidazole.jpg",
    description: "Kh√°ng sinh k·ªµ kh√≠"
  },

  // Danh m·ª•c 4: ChƒÉm s√≥c c√° nh√¢n (6 s·∫£n ph·∫©m)
  { 
    id: 19, 
    name: "D·∫ßu g·ªôi ƒë·∫ßu d∆∞·ª£c li·ªáu", 
    price: 85000, 
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 120, 
    image: "/images/products/shampoo.jpg",
    description: "D∆∞·ª°ng t√≥c m·ªÅm m∆∞·ª£t"
  },
  { 
    id: 20, 
    name: "Kem ch·ªëng n·∫Øng SPF50", 
    price: 145000, 
    originalPrice: 180000, 
    discount: 19, 
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 80, 
    image: "/images/products/sunscreen.jpg",
    description: "B·∫£o v·ªá da t·ªëi ∆∞u"
  },
  { 
    id: 21, 
    name: "N∆∞·ªõc s√∫c mi·ªáng Listerine", 
    price: 75000, 
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 95, 
    image: "/images/products/mouthwash.jpg",
    description: "L√†m s·∫°ch rƒÉng mi·ªáng"
  },
  { 
    id: 22, 
    name: "Kem ƒë√°nh rƒÉng Sensodyne", 
    price: 55000, 
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 110, 
    image: "/images/products/toothpaste.jpg",
    description: "Gi·∫£m √™ bu·ªët"
  },
  { 
    id: 23, 
    name: "S·ªØa r·ª≠a m·∫∑t La Roche", 
    price: 95000, 
    originalPrice: 120000, 
    discount: 21, 
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 70, 
    image: "/images/products/cleanser.jpg",
    description: "L√†m s·∫°ch da m·∫∑t"
  },
  { 
    id: 24, 
    name: "D·∫ßu g·ªôi tr·ªã g√†u", 
    price: 125000,
    category: "ChƒÉm s√≥c c√° nh√¢n", 
    categoryId: 4, 
    stock: 60, 
    image: "/images/products/anti-dandruff.jpg",
    description: "Tr·ªã g√†u hi·ªáu qu·∫£"
  },

  // Danh m·ª•c 5: D·ª•ng c·ª• y t·∫ø (6 s·∫£n ph·∫©m)
  { 
    id: 25, 
    name: "Nhi·ªát k·∫ø ƒëi·ªán t·ª≠", 
    price: 185000, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 45, 
    image: "/images/products/thermometer.jpg",
    description: "ƒêo nhi·ªát ƒë·ªô ch√≠nh x√°c"
  },
  { 
    id: 26, 
    name: "M√°y ƒëo huy·∫øt √°p", 
    price: 650000, 
    originalPrice: 800000, 
    discount: 19, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 20, 
    image: "/images/products/bp-monitor.jpg",
    description: "Theo d√µi huy·∫øt √°p"
  },
  { 
    id: 27, 
    name: "M√°y ƒëo ƒë∆∞·ªùng huy·∫øt", 
    price: 480000, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 15, 
    image: "/images/products/glucose-meter.jpg",
    description: "Ki·ªÉm tra ƒë∆∞·ªùng huy·∫øt"
  },
  { 
    id: 28, 
    name: "Kh·∫©u trang y t·∫ø (H·ªôp 50c)", 
    price: 85000, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 200, 
    image: "/images/products/face-mask.jpg",
    description: "B·∫£o v·ªá s·ª©c kh·ªèe"
  },
  { 
    id: 29, 
    name: "B·ªô s∆° c·ª©u gia ƒë√¨nh", 
    price: 245000, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 35, 
    image: "/images/products/first-aid.jpg",
    description: "ƒê·∫ßy ƒë·ªß d·ª•ng c·ª• s∆° c·ª©u"
  },
  { 
    id: 30, 
    name: "M√°y x√¥ng m≈©i h·ªçng", 
    price: 850000, 
    originalPrice: 1000000, 
    discount: 15, 
    category: "D·ª•ng c·ª• y t·∫ø", 
    categoryId: 5, 
    stock: 8, 
    image: "/images/products/nebulizer.jpg",
    description: "ƒêi·ªÅu tr·ªã h√¥ h·∫•p"
  }
];

export default function Shop() {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [searchTerm, setSearchTerm] = useState("");

  // L·ªçc s·∫£n ph·∫©m theo danh m·ª•c v√† t√¨m ki·∫øm
  const filteredProducts = MOCK_PRODUCTS.filter(product => {
    const matchCategory = !selectedCategory || product.categoryId === selectedCategory;
    const matchSearch = !searchTerm || 
      product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      product.category.toLowerCase().includes(searchTerm.toLowerCase());
    return matchCategory && matchSearch;
  });

  // Nh√≥m s·∫£n ph·∫©m theo category (c√≥ ti√™u ƒë·ªÅ)
  const groupedProducts = CATEGORIES.map(cat => ({
    ...cat,
    products: filteredProducts.filter(p => p.categoryId === cat.id)
  })).filter(group => group.products.length > 0);

  // Th√™m v√†o gi·ªè h√†ng
  const handleAddToCart = (product) => {
    alert(`ƒê√£ th√™m "${product.name}" v√†o gi·ªè h√†ng!`);
  };

  return (
    <div className="shop-container">
      {/* Header Section */}
      <div className="shop-header">
        <div className="shop-hero">
          <h1 className="shop-title">C·ª≠a H√†ng D∆∞·ª£c Ph·∫©m</h1>
          <p className="shop-subtitle">
            Ch·∫•t l∆∞·ª£ng - Uy t√≠n - Gi√° t·ªët | Giao h√†ng nhanh to√†n qu·ªëc
          </p>
        </div>

        {/* Search Bar */}
        <div className="search-section">
          <SearchBar 
            onSearch={setSearchTerm}
            placeholder="T√¨m ki·∫øm thu·ªëc, vitamin, d·ª•ng c·ª• y t·∫ø..."
          />
        </div>

        {/* Category Filter */}
        <div className="category-filter">
          <button
            className={`category-btn ${!selectedCategory ? "active" : ""}`}
            onClick={() => setSelectedCategory(null)}
          >
            <span className="category-icon">üè†</span>
            <span>T·∫•t c·∫£</span>
          </button>
          {CATEGORIES.map(cat => (
            <button
              key={cat.id}
              className={`category-btn ${selectedCategory === cat.id ? "active" : ""}`}
              onClick={() => setSelectedCategory(cat.id)}
            >
              <span className="category-icon">{cat.icon}</span>
              <span>{cat.name}</span>
            </button>
          ))}
        </div>
      </div>

      {/* Products Section - Hi·ªÉn th·ªã theo sections v·ªõi ti√™u ƒë·ªÅ */}
      <div className="products-section">
        {groupedProducts.length === 0 ? (
          <div className="no-products">
            <p>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o ph√π h·ª£p</p>
          </div>
        ) : (
          groupedProducts.map(group => (
            <div key={group.id} className="category-section">
              {/* Section Header v·ªõi ti√™u ƒë·ªÅ */}
              <div className="section-header">
                <h2 className="section-title">
                  <span className="section-icon">{group.icon}</span>
                  {group.name}
                </h2>
                <a href="#" className="view-more">Xem th√™m</a>
              </div>

              {/* Products Grid */}
              <div className="products-grid">
                {group.products.map(product => (
                  <ProductCard
                    key={product.id}
                    product={product}
                    onAddToCart={handleAddToCart}
                  />
                ))}
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  );
}
